# Spec 011: ë°ì´í„° ë™ê¸°í™” ë„êµ¬ (Data Synchronization Tools)

## ðŸŽ¯ ìš”ì•½ (Summary)
Obsidian(íŒŒì¼ ì‹œìŠ¤í…œ)ì—ì„œ ì‚­ì œëœ í† ë¡  íŒŒì¼ì´ ChromaDB(ë²¡í„° DB)ì—ëŠ” ì˜êµ¬ì ìœ¼ë¡œ ë‚¨ì•„ ê²€ìƒ‰ ê²°ê³¼ì— ë…¸ì¶œë˜ëŠ”("ê³ ì•„ ë°ì´í„°") ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, **ìˆ˜ë™ ë™ê¸°í™” ë„êµ¬ `sync_debates`**ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ðŸ“ ë³€ê²½ ì‚¬í•­ (Changes)

### 1. ë„ë©”ì¸ (Domain)
- **`SyncDebatesUseCase`**: íŒŒì¼ ì‹œìŠ¤í…œê³¼ DBì˜ ID ëª©ë¡ì„ ë¹„êµ(Diff)í•˜ì—¬, DBì—ë§Œ ì¡´ìž¬í•˜ëŠ” IDë¥¼ ì¶”ì¶œ ë° ì‚­ì œí•˜ëŠ” í•µì‹¬ ë¡œì§ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- **`SyncRepository`**: ë™ê¸°í™”ì— í•„ìš”í•œ `list_all_ids`, `delete_documents` ë“±ì˜ ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

### 2. ì¸í”„ë¼ (Infrastructure)
- **`LocalAdapter` í™•ìž¥**:
    - íŒŒì¼ëª…ì˜ íƒ€ìž„ìŠ¤íƒ¬í”„(`YYYY-mm-dd_HH-MM-SS`)ë¥¼ íŒŒì‹±í•˜ì—¬ ChromaDB ID(`Topic_YYYYmmddHHMMSS`) í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” `list_all_file_ids` ì—­ê³„ì‚° ë¡œì§ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
    - ChromaDB `get()`ì„ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ID ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” `list_all_chroma_ids`ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

### 3. ì¸í„°íŽ˜ì´ìŠ¤ (Interface)
- **MCP Tool `sync_debates`**:
    - `dry_run` ì˜µì…˜ì„ ì§€ì›í•˜ì—¬, ì‹¤ì œ ì‚­ì œ ì „ì— ì–´ë–¤ ë°ì´í„°ê°€ ì‚­ì œë ì§€ ë¦¬í¬íŠ¸ë¡œ ë¯¸ë¦¬ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ì˜ˆ: `sync_debates(dry_run=True)` -> "Orphaned Documents Found: 3"

## âœ… ê²€ì¦ (Verification)
`tests/usecases/test_sync_debates.py` ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ë‹¤ìŒ ì¼€ì´ìŠ¤ë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤:
1. **Clean State**: ì‚­ì œí•  íŒŒì¼ì´ ì—†ì„ ë•Œ ì•ˆì „í•˜ê²Œ ì¢…ë£Œ.
2. **Garbage Found**: ê³ ì•„ ë°ì´í„°ë§Œ ì •í™•ížˆ ì‹ë³„í•˜ì—¬ ì‚­ì œ.
3. **Dry Run**: ì‚­ì œ ì—†ì´ ê²°ê³¼ë§Œ ë¦¬í¬íŒ….

## ðŸ“Œ ì‚¬ìš©ë²• (Usage)
LLMì—ê²Œ ë‹¤ìŒê³¼ ê°™ì´ ìš”ì²­í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:
> "íŒŒì¼ ì¢€ ì§€ì› ëŠ”ë° DBëž‘ ë™ê¸°í™”í•´ì¤˜."
> (System calls `sync_debates()`)
